# editor

a rich text editor for javascript

## todo

- [x] bug! (create bold, make substring italic, remove bold on substring)
- [x] splitNodeAtChild
- [x] styleToElement
- [x] elementHasStyle
- [x] removeStyleFromElement
- [x] solve bug with empty style elems
- [x] handle BR as content tag
- [x] issue with strikethrough and underline together not working on spans
- [x] clicking to create a new style elem
- [x] empty style elem
- [x] bug with styling completely empty editor/element
- [x] when making newline, retain styling options
- [x] when clicking to create style elem, it doesn't update style (not sure if this is just mobile)
- [x] when clicking to create style elem, properly handle back arrow
- [x] handle br node in style change
- [x] font support (handle font tag)
- [x] clicking to create font tag creates error
- [x] reload in cursor doesn't reload page
- [x] bug with removing/changing styling with styling already applied 
- [x] sanitization (handle spans, invalid elements, and nested styling)
- [x] bug with changeStyle and font tag
- [x] div, brs, ps and lists in pastes
- [x] pasting multiline content into lists
- [x] when pasting list into list, it sometimes places list at the end of the lists
- [x] spaces between pasted nodes
- [x] pasting with empty editor
- [x] update illegal tags (ignore the tags instead of removing them)
- [x] sanitize out stuff like `pre`, `code`, `h1`, etc.
- [x] urgent bug with styling line break (handle BR)
- [x] urgent bug with backspace with cursor
- [x] create new cursor when backspacing out of style node
- [x] issue with whitespace, pasting/dragging
- [x] paste is broken again (pasting span into blockquote)
- [x] bug with styling `br`
- [x] bugs (extraneous divs when removing block styles)
- [x] bug with pasting styled within span
- [x] fix whitespace (handle `pre`)
- [x] history (restore selection and currentCursor)
- [x] history length limit
- [x] drag and drop
- [x] fix metaKey support on webkit
- [x] bug with styling br element
- [x] handle whitespace css
- [x] join multiple blocks (maybe)
- [x] removeBlockStyle is deleting content?!!?! (i might be going bobo) (i was not in fact bobo)
- [x] handle selection
- [x] handle empty editor
- [x] fix pasting (only combine lists on first)
- [x] urgent bug: removing styling on block node containing multiple children
- [x] urgent bug: for some reason not joining certain block nodes (may have to re-write joining code)
- [x] fix pasting (google docs does some weird stuff with B blocks and font-weight: normal ????)
- [x] styling overrides (respect order of dom)
- [x] order of operations
- [x] fix order of block nodes
- [x] fix drag and drop
- [x] joining nodes not working with paste anymore
- [x] remove old child pasted into if it is empty
- [x] fix backspace on cursor
- [x] urgent: styling block empty editor
- [x] urgent: infinite loop with removing styling on block
- [x] applying style should escape out of SOME extraneous nodes
- [x] splitting out of parent nodes when removing block style doesn't work
- [x] paste block nodes (allow certain nodes through, re-apply certain block styles (h1, text align))
- [x] problem with block nodes inside inline nodes
- [x] remove extraneous block nodes
- [x] bug with left click removing stuff
- [x] when pasting, if possible, always join the first node (and the split node, if possible)
- [x] h1-h6
- [x] when pasting, apply inline styles to all content tags, not just text nodes
- [x] remove current selection when pasting
- [x] handle lists (joining lists doesn't work)
- [x] when pasting, place the paste content AFTER the start node, not before!!
- [x] removing nested styles doesn't work (blockquote in blockquote)
- [ ] removing block style should join divs
- [x] list joining broken
- [x] removing styles on nested nodes not working
- [x] does removing multiple at a time work?
- [ ] more styling options
- [ ] retain selection when leaving editor
- [ ] block styling options
- [ ] lists
- [ ] images
- [ ] format indent up/down
- [ ] `sup`
- [ ] `pre`
- [ ] handle tab button
- [ ] a href (add mouse overlay, etc.)
- [ ] change previous history's cursor location if hashes match
- [ ] disallow pasting HTML option 
- [ ] overhaul UI (undo redo buttons, etc.)

## future todo

- [ ] bugs (fix empty styling elements, may be a possibility of text in empty text thing)
- [ ] bugs (when adjusting start container to be relative to inline nodes in getNextTextNodeInRange and applyStyleToBlockNode, it is not considering empty nodes);
- [ ] maybe think about fixing nested divs when pasting (not joining sufficiently)
- [ ] when adjusting range to be relative to inline nodes, it should properly handle empty nodes and properly traverse
  - it should always move in the direction of the endpoint (left for startContainer, right for endContainer)
  - if it hits the end of the editor:
    - if we are trying to adjust ranges for block styling, it should just use the editor as an endpoint
    - otherwise for getTextNodesInRange it should make a new text node
